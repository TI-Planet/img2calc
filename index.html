<!doctype html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <title>img2calc</title>
    <style type="text/css">
        body {
            font-family:-apple-system,BlinkMacSystemFont,"Lucida Grande","Trebuchet MS",Verdana,Helvetica,Arial,sans-serif;
            text-align:center;
            margin:0
        }

        #mainContent {
            max-width:80%;
            margin:auto
        }

        .file {
            border:2px dashed #777;
            border-radius:20px;
            max-width:70%;
            margin:30px auto;
            padding:20px
        }

        p {
            margin-top:0
        }

        .my-form {
            margin-bottom:10px
        }

        .button {
            display:inline-block;
            padding:10px;
            background:#ccc;
            cursor:pointer;
            border-radius:5px;
            border:1px solid #ccc
        }

        .button:hover {
            background:#ddd
        }

        #fileElem {
            display:none
        }

        .half_div {
            width:49%;
            min-height:320px;
        }

        .rounded_div {
            border:1px dotted #bbb;
            border-radius:10px
        }

        #inFrame {
            float:left;
            left:0;
            background:repeating-linear-gradient(45deg,#ddd,#fff 10px,#ddd 20px)
        }

        #outFrame {
            float:right;
            right:0;
            background:repeating-linear-gradient(-45deg,#ddd,#fff 10px,#ddd 20px)
        }

        #srcFrame {
            background:repeating-linear-gradient(-45deg,#ddd,#fff 10px,#ddd 20px)
        }

        #colorInput {
            width:8em;
        }

        #widthInput {
            width:3em;
        }

        #heightInput {
            width:3em;
        }

        #inImg {
            transition: transform .2s;
            image-rendering: pixelated;
        }

        #outImg {
            transition: transform .2s;
            image-rendering: pixelated;
        }

        .btn-group a { text-decoration: none }

        .btn-colorselector{display:inline-block;border:1px solid black;width:20px;height:20px;background-color:#DDD;vertical-align:middle;border-radius:0}
    </style>
    <link rel="stylesheet" href="/forum/css/bootstrap.min.css" type="text/css" />

    <link rel="stylesheet" href="/forum/css/highlight_style.css?v=2">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="/forum/js/highlighter.min.js"></script>
    <script type="text/javascript">
        hljs.configure({"useBR":true});
        function do_highlight_codes() {
            $(document).ready(function(){
		$(".codebox dd code, code.inline").each( function(i, e){ hljs.highlightBlock(e); } );
                $("code.hljs:not(.inline)").each(function(){var n=$(this);if("true"!=n.attr("data-lines-done")){var e=n.attr("class").replace("hljs","").trim().split(/\s+/),t=""===e[0]?e[1]:e.length>1&&""!==e[e.length-1]?"<span title='("+e[1]+" ?)'>"+e[0]+"</span>":e[0],a=n.parent().siblings().eq(0)[0];a&&a.innerHTML&&(a.innerHTML=a.innerHTML.replace("Code: ","Code "+(t?t:'')+" :  "));var l=n.html().split("<br>");l.forEach(function(n,e){l[e]='<span class="hljs-comment line-number" data-line="'+(e+1)+'"></span>'+n}),n.html(l.join("<br>")),n.attr("data-lines-done","true")}});
            });
        }
        do_highlight_codes();
    </script>
    <script src='./js/utils/common.js'></script>
    <script src='./js/utils/strings.js'></script>
    <script src='./js/zlib/constants.js'></script>
    <script src='./js/zlib/adler32.js'></script>
    <script src='./js/zlib/crc32.js'></script>
    <script src='./js/zlib/zstream.js'></script>
    <script src='./js/zlib/messages.js'></script>
    <script src='./js/zlib/trees.js'></script>
    <script src='./js/zlib/deflate.js'></script>
    <script src='./js/deflate.js'></script>
    <script>
        // Check if the browser supports the required features
        if (!(window.File && window.FileReader && window.FileList && window.Blob)) {
            alert("Reading files not supported by this browser");
            throw new Error("incompatible browser")
        }

        // Parse URL parameters
        const params = new URLSearchParams(window.location.search);
        window.mode = params.get('mode') || 'script';
        window.target = params.get('target');
        window.format = params.get('format');
        window.calcsize = '';

        // Set default values if needed
        if (mode !== 'var' && mode !== 'script') mode = 'var';
        if (target === 'nw') target = 'nw110';
        if (mode === 'var' && target !== '8xpython' && target !== '8xcolor' && target !== '8xp' && target !== '83' && target !== '73' && target !== '82' && target !== '85' && target !== '86' && target !== 'cp2' && target !== 'cg' && target !== 'cg3' && target !== 'zero') target = '8xpython';
        if (mode === 'script' && target !== '8xpython' && target !== '8xonline' && target != 'ns' && target != 'cm' && target != 'cx' && target != 'cx2' && target != 'nw100' && target != 'nw110' && target != 'nw120' && target !== 'cg' && target !== 'cg2' && target != 'g3' && target != 'g2app' && target != 'g2' && target != 'prime') target = 'cg2';

        // Set the appropriate format based on mode and target
        if (mode === 'var') {
            if (target === 'zero') { if (format !== 'zpic') format = 'zpic'; }
            else if (target === '8xpython') { if (format !== 'im8c.8xv' && format !== '8ca' && format !== '8ci') format = 'im8c.8xv'; }
            else if (target === '8xcolor') { if (format !== '8ca' && format !== '8ci') format = '8ca'; }
            else if (target === '8xp') { format = '8xi'; }
            else if (target === '83') { if (format !== '8xi' && format !== '83i') format = '8xi'; }
            else if (target === '73') { if (format !== '8xi' && format !== '73i') format = '8xi'; }
            else if (target === '82') { format = '82i'; }
            else if (target === '86') { format = '86i'; }
            else if (target === '85') { format = '85i'; }
            else if (target === 'cp2') { if (format !== 'c2p' && format !== 'i.c2p') format = 'c2p'; }
            else if (target === 'cg') { if (format !== 'cp.g3p' && format !== 'cp01.g3p' && format !== 'cp_i.g3p' && format !== 'cp01_i.g3p') format = 'cp.g3p'; }
            else if (target === 'cg3') { if (format !== 'cp.g3p' && format !== 'cp01.g3p' && format !== 'cp_i.g3p' && format !== 'cp01_i.g3p' && format !== 'cp_i.g4p' && format !== 'cp01_i.g4p') format = 'cp01.g4p'; }
        }
        else if (mode === 'script') {
            if (target === '8xpython') { if (format !== 'ti_graphics.py' && format !== 'ti_draw_ce.py' && format !== 'microbit.py' && format !== 'ti_hub_mb.py' && format !== 'ti_hub_rgbarr.py') format = 'ti_graphics.py'; }
            else if (target === '8xonline') { if (format !== 'ti_draw_ce.py') format = 'ti_draw_ce.py'; }
            else if (target === 'ns') { if (format !== 'nsp_ns.py' && format !== 'graphic_ns.py') format = 'nsp_ns.py'; }
            else if (target === 'cm') { if (format !== 'nsp_cx.py' && format !== 'kandinsky.py') format = 'nsp_cx.py'; }
            else if (target === 'cx') { if (format !== 'nsp_cx.py' && format !== 'graphic.py' && format !== 'kandinsky.py') format = 'graphic.py'; }
            else if (target === 'cx2') { if (format !== 'nsp_cx.py' && format !== 'ti_draw_cx.py' && format !== 'graphic.py' && format !== 'kandinsky.py' && format !== 'microbit.py' && format !== 'ti_hub_mb.py' && format !== 'ti_hub_rgbarr.py') format = 'ti_draw_cx.py'; }
            else if (target === 'nw110' || target === 'nw120') { if (format !== 'kandinsky.py' && format !== 'graphic.py') format = 'kandinsky.py'; }
            else if (target === 'nw100') { if (format !== 'kandinsky.py') format = 'kandinsky.py'; }
            else if (target === 'cg') { if (format !== 'graphic_cg.py' && format !== 'gint_cg.py' && format !== 'gint_cg.py' && format !== 'kandinsky_cg.py') format = 'graphic_cg.py'; }
            else if (target === 'cg2') { if (format !== 'casioplot_cg.py' && format !== 'graphic_cg.py' && format !== 'kandinsky_cg.py' && format !== 'gint_cg.py') format = 'casioplot_cg.py'; }
            else if (target === 'g3') { if (format !== 'casioplot_g3.py' && format !== 'graphic_g3.py' && format !== 'gint_g3.py') format = 'casioplot_g3.py'; }
            else if (target === 'g2app' || target === 'g2') { if (format !== 'graphic_g3.py' && format !== 'gint_g3.py') format = 'graphic_g3.py'; }
            else if (target === 'prime') { if (format !== 'hpprime.py') format = 'hpprime.py'; }
        }

        {
            const url = new URL(window.location);
            url.searchParams.set("mode", mode);
            url.searchParams.set("target", target);
            url.searchParams.set("format", format);
            history.pushState({}, "", url);
        }

        // Set zoom factor and add zoom styles to head
        const zoom_factor = format==='ti_hub_rgbarr.py' ? 100 : (format==='ti_hub_mb.py' || format==='microbit.py' ? 40 : (target==='g3' ? 3 : 1));
        const style = document.createElement('style');
        style.textContent = `
        #inImg:hover { transform: scale(${zoom_factor}); }
        #outImg:hover { transform: scale(${zoom_factor}); }
    `;
        document.head.appendChild(style);
    </script>
    <script type="module" src="./js/main.js"></script>
    <script>
        {
            const hostname = window.location.hostname;
            const isLocal = ["localhost", "127.0.0.1", ""].includes(hostname);
            const isOnTIPlanet = hostname === "tiplanet.org";
            const isIframed = window.self !== window.top;
            if (false && !isLocal && !(isIframed && isOnTIPlanet))
            {
                window.location.href = "https://tiplanet.org/forum/img2calc.php";
                throw new Error('Use img2calc on TI-Planet <3. Feel free to contribute to the code on GitHub though!');
            }
        }
    </script>
</head>

<body>
<br>
<div class="bootstrap"><div style="text-align: center; margin: auto">
    <div class="btn-group" id="modeButtons">
        <a class="btn disabled" style="font-weight: bold;padding-left: 4px;padding-right: 4px;" href="#">Mode</a>
        <script>
        document.write(`<a class="btn btn-info" data-target="var" href="?mode=var&amp;target=${target}&amp;format=${format}">variable</a>`);
        document.write(`<a class="btn btn-info" data-target="script" href="?mode=script&amp;target=${target}&amp;format=${format}">Python script</a>`);
        document.querySelector(`a.btn[data-target='${mode}']`).classList.add('active');
        </script>
    </div>
</div></div>
<hr>
<div class="bootstrap"><div style="text-align: center; margin: auto">
    <div class="btn-group" id="tiButtons">
        <a class="btn disabled" style="font-weight: bold;padding-left: 4px;padding-right: 4px;" href="#">TI</a>
        <script>
        document.write(`<a class="btn btn-info" data-target="8xpython" href="?mode=${mode}&amp;target=8xpython&amp;format=${format}">83PCE | 84+CE Python</a>`);
        if(mode === 'script') {
          document.write(`<a class="btn btn-info" data-target="ns" href="?mode=${mode}&amp;target=ns&amp;format=${format}">Nspire</a>`);
          document.write(`<a class="btn btn-info" data-target="cm" href="?mode=${mode}&amp;target=cm&amp;format=${format}">CM</a>`);
          document.write(`<a class="btn btn-info" data-target="cx" href="?mode=${mode}&amp;target=cx&amp;format=${format}">CX</a>`);
          document.write(`<a class="btn btn-info" data-target="cx2" href="?mode=${mode}&amp;target=cx2&amp;format=${format}">CX II</a>`);
          document.write(`<a class="btn btn-info" data-target="8xonline" href="?mode=${mode}&amp;target=8xonline&amp;format=${format}">MaClasseTI.fr</a>`);
        }
        if(mode === 'var') {
          document.write(`<a class="btn btn-info" data-target="8xcolor" href="?mode=${mode}&amp;target=8xcolor&amp;format=${format}">82A Python | 83PCE | 84+CE | 84+CSE</a>`);
          document.write(`<a class="btn btn-info" data-target="8xp" href="?mode=${mode}&amp;target=8xp&amp;format=${format}">82+ | 82A | 83+ | 84+</a>`);
          document.write(`<a class="btn btn-info" data-target="83" href="?mode=${mode}&amp;target=83&amp;format=${format}">76 | 82Stats | 83</a>`);
          document.write(`<a class="btn btn-info" data-target="73" href="?mode=${mode}&amp;target=73&amp;format=${format}">73</a>`);
          document.write(`<a class="btn btn-info" data-target="82" href="?mode=${mode}&amp;target=82&amp;format=${format}">82</a>`);
          document.write(`<a class="btn btn-info" data-target="86" href="?mode=${mode}&amp;target=86&amp;format=${format}">86</a>`);
          document.write(`<a class="btn btn-info" data-target="85" href="?mode=${mode}&amp;target=85&amp;format=${format}">85</a>`);
        }
        </script>
    </div>
</div></div>
<div class="bootstrap"><div style="text-align: center; margin: auto">
    <div class="btn-group" id="casioButtons">
        <a class="btn disabled" style="font-weight: bold;padding-left: 4px;padding-right: 4px;" href="#">Casio</a>
        <script>
        if(mode === 'script') {
          document.write(`<a class="btn btn-info" data-target="cg2" href="?mode=${mode}&amp;target=cg2&amp;format=${format}">fx-CG50/100 | Graph 90+E/Math+</a>`);
          document.write(`<a class="btn btn-info" data-target="cg" href="?mode=${mode}&amp;target=cg&amp;format=${format}">fx-CG10/20</a>`);
          document.write(`<a class="btn btn-info" data-target="g3" href="?mode=${mode}&amp;target=g3&amp;format=${format}">fx-9750/9860GIII | Graph 35+E II</a>`);
          document.write(`<a class="btn btn-info" data-target="g2app" href="?mode=${mode}&amp;target=g2app&amp;format=${format}">fx-9860G/GII | Graph 75/85/95</a>`);
          document.write(`<a class="btn btn-info" data-target="g2" href="?mode=${mode}&amp;target=g2&amp;format=${format}">fx-9750GII | Graph 35+E/USB</a>`);
        }
        if(mode === 'var') {
          document.write(`<a class="btn btn-info" data-target="cg3" href="?mode=${mode}&amp;target=cg3&amp;format=${format}">fx-CG100 / Graph Math+</a>`);
          document.write(`<a class="btn btn-info" data-target="cg" href="?mode=${mode}&amp;target=cg&amp;format=${format}">fx-CG10/20/50 / Graph 90+E</a>`);
          document.write(`<a class="btn btn-info" data-target="cp2" href="?mode=${mode}&amp;target=cp2&amp;format=${format}">fx-CP400/CG500</a>`);
        }
        </script>
    </div>
</div></div>
<script>
if (mode === 'script') {
  document.write(`<div class="bootstrap"><div style="text-align: center; margin: auto">`);
  document.write(`<div class="btn-group" id="targetButtons">`);
  document.write(`<a class="btn disabled" style="font-weight: bold;padding-left: 4px;padding-right: 4px;" href="#">NumWorks</a>`);
  document.write(`<a class="btn btn-info" data-target="nw100" href="?mode=${mode}&amp;target=nw100&amp;format=${format}">N0100</a>`);
  document.write(`<a class="btn btn-info" data-target="nw110" href="?mode=${mode}&amp;target=nw110&amp;format=${format}">N0110</a>`);
  document.write(`<a class="btn btn-info" data-target="nw120" href="?mode=${mode}&amp;target=nw120&amp;format=${format}">N0120</a>`);
  document.write(`</div>`);
  document.write(`</div>`);
  document.write(`</div>`);

  document.write(`<div class="bootstrap"><div style="text-align: center; margin: auto">`);
  document.write(`<div class="btn-group" id="targetButtons">`);
  document.write(`<a class="btn disabled" style="font-weight: bold;padding-left: 4px;padding-right: 4px;" href="#">HP</a>`);
  document.write(`<a class="btn btn-info" data-target="prime" href="?mode=${mode}&amp;target=prime&amp;format=${format}">Prime</a>`);
  document.querySelector(`a.btn[data-target='${target}']`).classList.add('active');
  document.write(`</div>`);
  document.write(`</div>`);
  document.write(`</div>`);
}
if (mode === 'var') {
  document.write(`<div class="bootstrap"><div style="text-align: center; margin: auto">`);
  document.write(`<div class="btn-group" id="targetButtons">`);
  document.write(`<a class="btn disabled" style="font-weight: bold;padding-left: 4px;padding-right: 4px;" href="#">Zero</a>`);
  document.write(`<a class="btn btn-info" data-target="zero" href="?mode=${mode}&amp;target=zero&amp;format=${format}">ZGC1 | ZGC2 | ZGC3 | ZGC4</a>`);
  document.write(`</div>`);
  document.write(`</div>`);
  document.write(`</div>`);
}
let el = document.querySelector(`a.btn[data-target='${target}']`);
if(el) el.classList.add('active');
</script>
<hr>
<script>
if (target==='8xpython' || target==='8xonline' || target==='cg3' || target==='cg2' || target==='cg' || target==='g3' || target==='g2app' || target==='g2'|| target==='8xcolor' || target==='73' || target==='83' || target==='cx' || target==='cx2' || target==='cm' || target==='ns' || target==='nw110' || target==='nw120') {
    document.write(`<br>`);
    document.write(`<div class="bootstrap"><div style="text-align: center; margin: auto;">`);
    document.write(`<div class="btn-group" id="formatButtons">`);
    document.write(`<a class="btn disabled" style="font-weight: bold;padding-left: 4px;padding-right: 4px;" href="#">`+(mode === 'script' ? "import" : "format") + `</a>`);
    if (mode === 'var' && target === '8xpython') {
      document.write(`<a class="btn btn-info ${format === 'im8c.8xv' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=im8c.8xv">Python-IM8C.8xv</a>`);
    }
    if (mode === 'var' && (target === '8xpython' || target === '8xcolor')) {
      document.write(`<a class="btn btn-info ${format === '8ca' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=8ca">ImageX.8ca</a>`);
      document.write(`<a class="btn btn-info ${format === '8ci' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=8ci">PicX.8ci</a>`);
    }
    if (mode === 'script' && (target === '8xpython' || target === '8xonline')) {
      document.write(`<a class="btn btn-info ${format === 'ti_draw_ce.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=ti_draw_ce.py">ti_draw</a>`);
    }
    if (mode === 'script' && target === '8xpython') {
      document.write(`<a class="btn btn-info ${format === 'ti_graphics.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=ti_graphics.py">ti_graphics</a>`);
      document.write(`<a class="btn btn-info ${format === 'ti_draw_ce.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=ti_draw_ce.py">ti_draw</a>`);
      document.write(`<a class="btn btn-info ${format === 'microbit.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=microbit.py">microbit</a>`);
      document.write(`<a class="btn btn-info ${format === 'ti_hub_mb.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=ti_hub_mb.py">ti_hub (micro:bit)</a>`);
      document.write(`<a class="btn btn-info ${format === 'ti_hub_rgbarr.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=ti_hub_rgbarr.py">ti_hub (RGB Array)</a>`);
    }
    if (mode === 'script' && target === 'cg2') {
      document.write(`<a class="btn btn-info ${format === 'casioplot_cg.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=casioplot_cg.py">casioplot</a>`);
    }
    if (mode === 'script' && (target === 'cg2' || target === 'cg')) {
      document.write(`<a class="btn btn-info ${format === 'graphic_cg.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=graphic_cg.py">graphic</a>`);
      document.write(`<a class="btn btn-info ${format === 'gint_cg.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=gint_cg.py">gint</a>`);
      document.write(`<a class="btn btn-info ${format === 'kandinsky_cg.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=kandinsky_cg.py">kandinsky</a>`);
    }
    if (target === '8xp' || target === '83' || target === '73') document.write(`<a class="btn btn-info ${format === '8xi' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=8xi">PicX.8xi</a>`);
    if (target === '83') document.write(`<a class="btn btn-info ${format === '83i' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=83i">PicX.83i</a>`);
    if (target === '73') document.write(`<a class="btn btn-info ${format === '73i' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=73i">PicX.73i</a>`);
    if (target === '82') document.write(`<a class="btn btn-info ${format === '82i' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=82i">PicX.82i</a>`);
    if (target === '86') document.write(`<a class="btn btn-info ${format === '86i' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=86i">PicX.86i</a>`);
    if (target === '85') document.write(`<a class="btn btn-info ${format === '85i' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=85i">PicX.85i</a>`);
    if (target === 'cp2') {
      document.write(`<a class="btn btn-info ${format === 'c2p' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=c2p">c2p</a>`);
      document.write(`<a class="btn btn-info ${format === 'i.c2p' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=i.c2p">c2p indexed</a>`);
    }
    if (target === 'cx2') document.write(`<a class="btn btn-info ${format === 'ti_draw_cx.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=ti_draw_cx.py">ti_draw</a>`);
    if (target === 'cx' || target === 'cx2') {
      document.write(`<a class="btn btn-info ${format === 'graphic.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=graphic.py">graphic</a>`);
    }
    if (target === 'cx' || target === 'cx2' || target === 'cm') {
      document.write(`<a class="btn btn-info ${format === 'nsp_cx.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=nsp_cx.py">nsp</a>`);
      document.write(`<a class="btn btn-info ${format === 'kandinsky.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=kandinsky.py">kandinsky</a>`);
    }
    if (target === 'ns') {
      document.write(`<a class="btn btn-info ${format === 'nsp_ns.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=nsp_ns.py">nsp</a>`);
      document.write(`<a class="btn btn-info ${format === 'graphic_ns.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=graphic_ns.py">graphic</a>`);
    }
    if (target === 'cx2') {
      document.write(`<a class="btn btn-info ${format === 'microbit.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=microbit.py">microbit</a>`);
      document.write(`<a class="btn btn-info ${format === 'ti_hub_mb.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=ti_hub_mb.py">ti_innovator (micro:bit)</a>`);
      document.write(`<a class="btn btn-info ${format === 'ti_hub_rgbarr.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=ti_hub_rgbarr.py">ti_hub (RGB Array)</a>`);
    }
    if (mode === 'var' && (target === 'cg' || target === 'cg3')) {
      document.write(`<a class="btn btn-info ${format === 'cp.g3p' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=cp.g3p">CP.g3p</a>`);
      document.write(`<a class="btn btn-info ${format === 'cp01.g3p' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=cp01.g3p">CP01.g3p</a>`);
      if (target === 'cg3') document.write(`<a class="btn btn-info ${format === 'cp01.g4p' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=cp01.g4p">CP01.g4p</a>`);
      document.write(`<a class="btn btn-info ${format === 'cp_i.g3p' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=cp_i.g3p">CP.g3p indexed</a>`);
      document.write(`<a class="btn btn-info ${format === 'cp01_i.g3p' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=cp01_i.g3p">CP01.g3p indexed</a>`);
      if (target === 'cg3') document.write(`<a class="btn btn-info ${format === 'cp01_i.g4p' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=cp01_i.g4p">CP01.g4p indexed</a>`);
    }
    if (mode === 'script' && target === 'g3') {
      document.write(`<a class="btn btn-info ${format === 'casioplot_g3.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=casioplot_g3.py">casioplot</a>`);
    }
    if (mode === 'script' && (target === 'g3' || target === 'g2app' || target === 'g2')) {
      document.write(`<a class="btn btn-info ${format === 'graphic_g3.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=graphic_g3.py">graphic</a>`);
      document.write(`<a class="btn btn-info ${format === 'gint_g3.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=gint_g3.py">gint</a>`);
    }
    if (target === 'nw110' || target === 'nw120') {
      document.write(`<a class="btn btn-info ${format === 'kandinsky.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=kandinsky.py">kandinsky</a>`);
      document.write(`<a class="btn btn-info ${format === 'graphic.py' ? 'active' : ''}" href="?mode=${mode}&amp;target=${target}&amp;format=graphic.py">graphic</a>`);
    }
    document.write(`</div>`);
    document.write(`</div>`);
    document.write(`</div>`);
}
if (format==='nsp_ns.py' || format==='graphic_ns.py' || format==='nsp_cx.py' || format==='graphic.py' || format==='graphic_cg.py' || format==='graphic_g3.py' || format==='gint_cg.py' || format==='gint_g3.py' || format==='kandinsky_cg.py') {
    document.write(`<br>`);
    document.write(`<div class="bootstrap"><div style="text-align: left; margin: auto; display: inline-block" class="alert alert-error">`);
    if(target === 'ns' && format === 'nsp_ns.py')
      document.write(`Nécessite l'installation de <b><a href="https://tiplanet.org/forum/ndl3ss.php">Ndless</a></b> + <b><a href="https://tiplanet.org/forum/archives_voir.php?id=313881">Micropython</a></b>`);
    if(target === 'cx' && format === 'graphic.py')
      document.write(`Nécessite l'installation de <b><a href="https://tiplanet.org/forum/ndl3ss.php">Ndless</a></b> + <b><a href="https://tiplanet.org/forum/archives_voir.php?id=79135">KhiCAS</a></b>`);
    if(target === 'ns' && format === 'graphic_ns.py')
      document.write(`Nécessite l'installation de <b><a href="https://tiplanet.org/forum/ndl3ss.php">Ndless</a></b> + <b><a href="https://tiplanet.org/forum/archives_voir.php?id=3563411">KhiCAS</a></b>`);
    if(target === 'cx2' && format === 'graphic.py')
      document.write(`Nécessite l'installation de <b><a href="https://tiplanet.org/forum/ndl3ss.php">Ndless</a></b> + <b><a href="https://tiplanet.org/forum/archives_voir.php?id=79135">KhiCAS</a></b>`);
    if((target === 'cx2' || target === 'cx') && format === 'kandinsky.py')
      document.write(`Nécessite l'installation de <b><a href="https://tiplanet.org/forum/ndl3ss.php">Ndless</a></b> + <b><a href="https://tiplanet.org/forum/archives_voir.php?id=3609339">Upsilon</a></b>`);
    if(target === 'cm' && format === 'nsp_cx.py')
      document.write(`Nécessite l'installation de <b><a href="https://tiplanet.org/forum/ndl3ss.php">Ndless</a></b> + <b><a href="https://tiplanet.org/forum/archives_voir.php?id=313881">Micropython</a></b>`);
    if(target === 'cx' && format === 'nsp_cx.py')
      document.write(`Nécessite au choix l'installation de :<ul><li><b><a href="https://tiplanet.org/forum/ndl3ss.php">Ndless</a></b> + <b><a href="https://tiplanet.org/forum/archives_voir.php?id=79135">KhiCAS</a></b></li><li><b><a href="https://tiplanet.org/forum/ndl3ss.php">Ndless</a></b> + <b><a href="https://tiplanet.org/forum/archives_voir.php?id=313881">Micropython</a></b></li></ul>`);
    if(target === 'cx2' && format === 'nsp_cx.py')
      document.write(`Nécessite au choix l'installation de :<ul><li><b><a href="https://tiplanet.org/forum/ndl3ss.php">Ndless</a></b> + <b><a href="https://tiplanet.org/forum/archives_voir.php?id=79135">KhiCAS</a></b></li><li><b><a href="https://tiplanet.org/forum/ndl3ss.php">Ndless</a></b> + <b><a href="https://tiplanet.org/forum/archives_voir.php?id=313881">Micropython</a></b></li></ul>`);
    if(target === 'cg' && format === 'graphic_cg.py')
      document.write(`Nécessite l'installation de <b><a href="https://tiplanet.org/forum/archives_voir.php?id=3210463">Micropy</a></b>`);
    if((target === 'cg' || target === 'cg2') && format === 'gint_cg.py')
      document.write(`Nécessite l'installation de <b><a href="https://tiplanet.org/forum/archives_voir.php?id=3578679">PythonExtra</a></b>`);
    if((target === 'g3' || target === 'g2app') && format === 'graphic_g3.py')
      document.write(`Nécessite l'installation de <b><a href="https://tiplanet.org/forum/archives_voir.php?id=3224228">Micropy</a></b>`);
    if((target === 'g3' || target === 'g2app') && format === 'gint_g3.py')
      document.write(`Nécessite l'installation de <b><a href="https://tiplanet.org/forum/archives_voir.php?id=3578678">PythonExtra</a></b>`);
    if(target === 'g2' && format === 'graphic_g3.py')
      document.write(`Nécessite l'installation d'un <a href="https://tiplanet.org/forum/viewtopic.php?f=96&t=19592">système gérant les applications</a> + <b><a href="https://tiplanet.org/forum/archives_voir.php?id=3224228">Micropy</a></b>`);
    if(target === 'g2' && format === 'gint_g3.py')
      document.write(`Nécessite l'installation d'un <a href="https://tiplanet.org/forum/viewtopic.php?f=96&t=19592">système gérant les applications</a> + <b><a href="https://tiplanet.org/forum/archives_voir.php?id=3578678">PythonExtra</a></b>`);
    if(target === 'cg2' && format === 'graphic_cg.py')
      document.write(`Nécessite au choix l'installation de :<ul><li><b><a href="https://tiplanet.org/forum/archives_voir.php?id=3037977">KhiCAS</a></b></li><li><b><a href="https://tiplanet.org/forum/archives_voir.php?id=3210463">Micropy</a></b></li></ul>`);
    if((target === 'cg2' || target === 'cg') && format === 'kandinsky_cg.py')
      document.write(`Nécessite l'installation de <b><a href="https://tiplanet.org/forum/archives_voir.php?id=3373698">Upsilon</a></b>`);
    if(target === 'nw110' && format === 'graphic.py')
      document.write(`Nécessite au choix l'installation de :<ul><li><b><a href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/nws.html">Khi + KhiCAS</a></b></li><li><b><a href="https://getomega.dev/install/latest">Omega</a></b> + <b><a href="https://external.getomega.dev/">KhiCAS</a></b></li><li><b><a href="https://getupsilon.web.app/install">Upsilon</a></b> + <b><a href="https://upsilonnumworks.github.io/Upsilon-External/">KhiCAS</a></b></li><li><b><a href="https://www.nwagyu.com/apps/khicas/">KhiCAS</a></b></li></ul>`);
    if(target === 'nw120' && format === 'graphic.py')
      document.write(`Nécessite l'installation de <b><a href="https://www.nwagyu.com/apps/khicas/">KhiCAS</a></b>`);
    document.write(`</div>`);
    document.write(`</div>`);
}
</script>
<br>
<div class="bootstrap"><div class="file" style="text-align: center; margin: auto">
<b>
<input id="colorInput" type="number" min="1">
</b> colors canvas to fit image in :<br>
<br>
<input id="widthInput" type="number"> × <input id="heightInput" type="number">
<div class="btn-group" id="sizeButtons"></div>
<br>
<label for="fitInput" style="display:inline"><input id="fitInput" type="checkbox"> enlarge smaller </label>
<label for="ratioInput"  style="display:inline"><input id="ratioInput" type="checkbox" checked="checked"> keep image ratio </label>
</div>
</div>
<br>

<div id="mainContent">
    <div id="inFrame" class="rounded_div half_div">
        <br>
        <p><b>Source image:</b></p>
        <img id="inImg" alt="" src=""/>
        <div id="inFile" class="file">
            <form class="my-form">
                <p>Choose your image file</p>
                <input type="file" id="fileElem" accept="image/*" onchange="handleInFile(this.files[0]); this.value='';">
                <label class="button" for="fileElem">Select the image</label>
            </form>
        </div>
    </div>
    <div id="outFrame" class="rounded_div half_div">
        <br>
        <p><b>Converted image:</b></p>
        <img id="outImg" alt="" src=""/>
        <div id="outFile" class="file">
            <ul id="fileList"></ul>
        </div>
    </div>
    <canvas id="inImgCanvas" style="display:none"></canvas>
    <canvas id="outImgCanvas" style="display:none"></canvas>
    <canvas id="paletteCanvas" style="display:none"></canvas>

    <div style="clear:both"></div><br>
    <div class="rounded_div" id='srcFrame' style='display:none'>
      <br>
      <p><b>Python code for converted image</b></p>
      <div id="source8xpcontainer" style="margin-top:4px"><dl class="codebox"><dt></dt><dd><code class="python" style="unicode-bidi: embed; white-space: pre; text-align: left; overflow:hidden;"></code></dd></dl></div>
    </div>

</div>
</body>
</html>
